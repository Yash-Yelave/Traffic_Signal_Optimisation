<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UrbanFlow AI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='components.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <div class="logo">
                <i class="fas fa-traffic-light"></i>
                <h1>UrbanFlow AI</h1>
                <span class="status-badge active">All 4 Lanes Active</span>
            </div>
        </div>
        <div class="header-right">
            <div class="stats">
                <span class="stat">
                    <i class="fas fa-signal"></i> 45%
                </span>
                <span class="stat">
                    <i class="fas fa-wifi"></i> 62%
                </span>
                <span class="stat online">
                    <i class="fas fa-circle"></i> Online
                </span>
                <span class="stat">
                    <i class="fas fa-database"></i> DB
                </span>
                <span class="stat">
                    <i class="fas fa-server"></i> PWR
                </span>
                <span class="time">Up 7d 14h 22m</span>
            </div>
            <button class="share-btn">Share</button>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <nav class="nav-tabs">
        <div class="tab-list">
            <button class="tab active" data-tab="live-camera">
                <i class="fas fa-video"></i> Live Camera Feed
            </button>
            <button class="tab" data-tab="manageable-components">
                <i class="fas fa-cogs"></i> AI Manageable Components
            </button>
            <button class="tab" data-tab="traffic-detection">
                <i class="fas fa-eye"></i> Traffic Detection View
            </button>
        </div>
    </nav>

    <!-- Tab Contents -->
    <main class="main-content">
        <!-- Live Camera Feed Tab -->
        <div id="live-camera" class="tab-content active">
            <div class="tab-header">
                <h2><i class="fas fa-video"></i> Live Camera Feeds - All Lanes</h2>
                <div class="tab-actions">
                    <button class="action-btn">
                        <i class="fas fa-list"></i> List
                    </button>
                </div>
            </div>
            
            <div class="camera-grid">
                <div class="camera-feed lane-1">
                    <div class="camera-header">
                        <span class="lane-label">Lane 1</span>
                        <span class="status-indicator warning">
                            <i class="fas fa-exclamation-triangle"></i> WARNING
                        </span>
                        <span class="direction">North</span>
                    </div>
                    <div class="video-container">
                        <img src="{{ url_for('video_feed', lane_id=1) }}" alt="Lane 1 Feed" class="video-stream">
                        <div class="video-overlay">
                            <div class="alert-message">Heavy congestion detected</div>
                        </div>
                    </div>
                    <div class="camera-stats">
                        <div class="stat">
                            <span class="value" id="lane1-vehicles">23</span>
                            <span class="label">Vehicles</span>
                        </div>
                        <div class="stat">
                            <span class="value" id="lane1-speed">45</span>
                            <span class="label">km/h</span>
                        </div>
                        <div class="stat">
                            <span class="value traffic-high" id="lane1-traffic">78%</span>
                            <span class="label">Traffic</span>
                        </div>
                    </div>
                </div>

                <div class="camera-feed lane-2">
                    <div class="camera-header">
                        <span class="lane-label">Lane 2</span>
                        <span class="status-indicator active">
                            <i class="fas fa-check-circle"></i> ACTIVE
                        </span>
                        <span class="direction">South</span>
                    </div>
                    <div class="video-container">
                        <img src="{{ url_for('video_feed', lane_id=2) }}" alt="Lane 2 Feed" class="video-stream">
                    </div>
                    <div class="camera-stats">
                        <div class="stat">
                            <span class="value" id="lane2-vehicles">15</span>
                            <span class="label">Vehicles</span>
                        </div>
                        <div class="stat">
                            <span class="value" id="lane2-speed">62</span>
                            <span class="label">km/h</span>
                        </div>
                        <div class="stat">
                            <span class="value traffic-low" id="lane2-traffic">34%</span>
                            <span class="label">Traffic</span>
                        </div>
                    </div>
                </div>

                <div class="camera-feed lane-3">
                    <div class="camera-header">
                        <span class="lane-label">Lane 3</span>
                        <span class="status-indicator error">
                            <i class="fas fa-times-circle"></i> ERROR
                        </span>
                        <span class="direction">East</span>
                    </div>
                    <div class="video-container">
                        <div class="video-offline">
                            <i class="fas fa-exclamation-triangle"></i>
                            <p>Camera Offline</p>
                        </div>
                        <div class="video-overlay">
                            <div class="alert-message error">Accident detected</div>
                        </div>
                    </div>
                    <div class="camera-stats">
                        <div class="stat">
                            <span class="value">0</span>
                            <span class="label">Vehicles</span>
                        </div>
                        <div class="stat">
                            <span class="value">0</span>
                            <span class="label">km/h</span>
                        </div>
                        <div class="stat">
                            <span class="value">0%</span>
                            <span class="label">Traffic</span>
                        </div>
                    </div>
                </div>

                <div class="camera-feed lane-4">
                    <div class="camera-header">
                        <span class="lane-label">Lane 4</span>
                        <span class="status-indicator active">
                            <i class="fas fa-check-circle"></i> ACTIVE
                        </span>
                        <span class="direction">West</span>
                    </div>
                    <div class="video-container">
                        <img src="{{ url_for('video_feed', lane_id=4) }}" alt="Lane 4 Feed" class="video-stream">
                    </div>
                    <div class="camera-stats">
                        <div class="stat">
                            <span class="value" id="lane4-vehicles">18</span>
                            <span class="label">Vehicles</span>
                        </div>
                        <div class="stat">
                            <span class="value" id="lane4-speed">52</span>
                            <span class="label">km/h</span>
                        </div>
                        <div class="stat">
                            <span class="value traffic-medium" id="lane4-traffic">45%</span>
                            <span class="label">Traffic</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bottom-stats">
                <div class="stat-item">
                    <span class="label">Total Vehicles:</span>
                    <span class="value" id="total-vehicles">65</span>
                </div>
                <div class="stat-item">
                    <span class="label">Avg Speed:</span>
                    <span class="value" id="avg-speed">44</span>
                    <span class="unit">km/h</span>
                </div>
                <div class="system-status">
                    <span class="status-text">All Systems Online - 10:51 PM</span>
                </div>
            </div>
        </div>

        <!-- AI Manageable Components Tab -->
        <div id="manageable-components" class="tab-content">
            <div class="tab-header">
                <h2><i class="fas fa-cogs"></i> AI Manageable Components</h2>
            </div>

            <div class="components-grid">
                <!-- Vehicle Statistics Card -->
                <div class="component-card">
                    <div class="card-header">
                        <h3><i class="fas fa-chart-bar"></i> Vehicle Statistics</h3>
                    </div>
                    <div class="card-content">
                        <div class="stats-row">
                            <div class="stat-box">
                                <div class="stat-value" id="total-vehicles-comp">65</div>
                                <div class="stat-label">Total Vehicles</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-value" id="avg-speed-comp">44</div>
                                <div class="stat-label">Avg Speed (km/h)</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-value" id="avg-congestion">62%</div>
                                <div class="stat-label">Avg Congestion</div>
                            </div>
                        </div>
                        
                        <div class="vehicle-distribution">
                            <h4>Vehicle Types Distribution</h4>
                            <div class="distribution-bars">
                                <div class="bar-item">
                                    <span class="bar-label">Cars</span>
                                    <div class="bar-container">
                                        <div class="bar bar-cars" style="width: 65%"></div>
                                    </div>
                                    <span class="bar-value">65%</span>
                                </div>
                                <div class="bar-item">
                                    <span class="bar-label">Trucks</span>
                                    <div class="bar-container">
                                        <div class="bar bar-trucks" style="width: 20%"></div>
                                    </div>
                                    <span class="bar-value">20%</span>
                                </div>
                                <div class="bar-item">
                                    <span class="bar-label">Buses</span>
                                    <div class="bar-container">
                                        <div class="bar bar-buses" style="width: 10%"></div>
                                    </div>
                                    <span class="bar-value">10%</span>
                                </div>
                                <div class="bar-item">
                                    <span class="bar-label">Bikes</span>
                                    <div class="bar-container">
                                        <div class="bar bar-bikes" style="width: 5%"></div>
                                    </div>
                                    <span class="bar-value">5%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Traffic Control Center Card -->
                <div class="component-card">
                    <div class="card-header">
                        <h3><i class="fas fa-traffic-light"></i> Traffic Control Center</h3>
                    </div>
                    <div class="card-content">
                        <div class="traffic-signals">
                            <div class="signal-group">
                                <h4>North-South</h4>
                                <div class="signal-lights">
                                    <div class="light red active" data-color="red">
                                        <span class="timer">145</span>
                                    </div>
                                    <div class="light yellow" data-color="yellow">
                                        <span class="timer">5</span>
                                    </div>
                                    <div class="light green" data-color="green">
                                        <span class="timer">30</span>
                                    </div>
                                </div>
                                <div class="signal-status">Red - 145s remaining</div>
                            </div>
                            
                            <div class="signal-group">
                                <h4>East-West</h4>
                                <div class="signal-lights">
                                    <div class="light red" data-color="red">
                                        <span class="timer">30</span>
                                    </div>
                                    <div class="light yellow" data-color="yellow">
                                        <span class="timer">5</span>
                                    </div>
                                    <div class="light green active" data-color="green">
                                        <span class="timer">325</span>
                                    </div>
                                </div>
                                <div class="signal-status">Green - 325s remaining</div>
                            </div>
                        </div>

                        <div class="intersection-control">
                            <div class="intersection-row">
                                <div class="intersection">
                                    <span class="intersection-label">Main St</span>
                                    <div class="mini-lights">
                                        <div class="mini-light red"></div>
                                        <div class="mini-light yellow active"></div>
                                        <div class="mini-light green"></div>
                                    </div>
                                    <span class="intersection-timer">75s</span>
                                </div>
                                <div class="intersection">
                                    <span class="intersection-label">Park Ave</span>
                                    <div class="mini-lights">
                                        <div class="mini-light red"></div>
                                        <div class="mini-light yellow"></div>
                                        <div class="mini-light green active"></div>
                                    </div>
                                    <span class="intersection-timer">286s</span>
                                </div>
                            </div>
                        </div>

                        <div class="emergency-controls">
                            <button class="emergency-btn">
                                <i class="fas fa-exclamation-triangle"></i>
                                Emergency Stop All Signals
                            </button>
                            <button class="priority-btn">
                                Priority Vehicle Override
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Live Alerts & Notifications Card -->
                <div class="component-card">
                    <div class="card-header">
                        <h3><i class="fas fa-bell"></i> Live Alerts & Notifications</h3>
                    </div>
                    <div class="card-content">
                        <div class="alert-item accident">
                            <div class="alert-icon">
                                <i class="fas fa-car-crash"></i>
                            </div>
                            <div class="alert-content">
                                <div class="alert-type">ACCIDENT</div>
                                <div class="alert-message">Vehicle accident detected on Lane 3</div>
                                <div class="alert-time">2 min ago</div>
                            </div>
                        </div>
                        
                        <div class="alert-scroll">
                            <div class="alert-item warning">
                                <div class="alert-icon">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div class="alert-content">
                                    <div class="alert-type">HIGH CONGESTION</div>
                                    <div class="alert-message">Heavy traffic detected on Lane 1</div>
                                    <div class="alert-time">5 min ago</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Lane Usage & Performance Card -->
                <div class="component-card">
                    <div class="card-header">
                        <h3><i class="fas fa-road"></i> Lane Usage & Performance</h3>
                    </div>
                    <div class="card-content">
                        <div class="lane-performance">
                            <div class="lane-item">
                                <div class="lane-header">
                                    <span class="lane-name">Lane 1</span>
                                    <span class="lane-direction">North</span>
                                    <span class="status-badge warning">WARNING</span>
                                </div>
                                <div class="lane-stats">
                                    <div class="lane-stat">
                                        <span class="value">23</span>
                                        <span class="label">Vehicles</span>
                                    </div>
                                    <div class="lane-stat">
                                        <span class="value">45</span>
                                        <span class="label">km/h</span>
                                    </div>
                                    <div class="lane-stat">
                                        <span class="value">78%</span>
                                        <span class="label">Congestion</span>
                                    </div>
                                </div>
                            </div>

                            <div class="lane-item">
                                <div class="lane-header">
                                    <span class="lane-name">Lane 2</span>
                                    <span class="lane-direction">South</span>
                                    <span class="status-badge active">ACTIVE</span>
                                </div>
                                <div class="lane-stats">
                                    <div class="lane-stat">
                                        <span class="value">15</span>
                                        <span class="label">Vehicles</span>
                                    </div>
                                    <div class="lane-stat">
                                        <span class="value">62</span>
                                        <span class="label">km/h</span>
                                    </div>
                                    <div class="lane-stat">
                                        <span class="value">34%</span>
                                        <span class="label">Congestion</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Traffic Detection View Tab -->
        <div id="traffic-detection" class="tab-content">
            <div class="tab-header">
                <h2><i class="fas fa-eye"></i> Traffic Detection View</h2>
            </div>
            <div class="detection-container">
                <div class="camera-feed lane-1">
                    <div class="camera-header">
                        <h3>AI Traffic Analysis</h3>
                        <div class="detection-controls">
                            <button class="control-btn active">Real-time Detection</button>
                            <button class="control-btn">Object Tracking</button>
                            <button class="control-btn">Speed Analysis</button>
                        </div>
                    </div>
                    <div class="video-container">
                        <img src="{{ url_for('traffic_detection_feed') }}" alt="Traffic Detection Feed" class="detection-stream">
                        
                        </div>
                        <div class="detection-overlay">
                            <div class="detection-stats">
                                <div class="detection-stat">
                                    <span class="stat-label">Objects Detected:</span>
                                    <span class="stat-value">12</span>
                                </div>
                                <div class="detection-stat">
                                    <span class="stat-label">Average Speed:</span>
                                    <span class="stat-value">45 km/h</span>
                                </div>
                                <div class="detection-stat">
                                    <span class="stat-label">Traffic Density:</span>
                                    <span class="stat-value">Medium</span>
                                </div>
                            </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>